# Economic on actions
# Root = Country

on_yearly_pulse_country = {
	on_actions = {
		economy_update_on_yearly_pulse_country
		ideology_update_on_yearly_pulse_country
		brazil_pop_update_on_yearly_pulse_country
		colony_pop_update_on_yearly_pulse_country
		france_pop_update_on_yearly_pulse_country
		germany_pop_update_on_yearly_pulse_country
		usa_economy_update_on_yearly_pulse_country
		japan_economy_update_on_yearly_pulse_country
		irish_independence_on_yearly_pulse_country
		healthcare_on_yearly_pulse_country	
		decolonization_on_yearly_pulse_country
		decolonization_age_on_yearly_pulse_country
		super_germany_on_yearly_pulse_country
		superpower_on_yearly_pulse_country
		flavor_middle_east_on_yearly_pulse_country
	}
}

healthcare_on_yearly_pulse_country = {
	events = {
		ztr_healthcare.1
		ztr_healthcare.2
		ztr_healthcare.3
		ztr_healthcare.4
		ztr_healthcare.5
	}
}

economy_update_on_yearly_pulse_country = {
	events = {
		ztr_economic_update.1 # Tech & Res Inizialization
		ztr_economic_update.2
		ztr_economic_update.3
		ztr_economic_update.4
		ztr_economic_update.5
		ztr_economic_update.6
		ztr_economic_update.7
		ztr_economic_update.8
		ztr_economic_update.9
		ztr_economic_update.10
		ztr_economic_update.11
		ztr_economic_update.12
		ztr_economic_update.13
		ztr_economic_update.14
		ztr_economic_update.15
		ztr_economic_update.16
		ztr_economic_update.17
		ztr_economic_update.18 # Building Baseline
		ztr_economic_update.19 # Building Baseline Removal
		ztr_technology.3 # research_center removal
	}
}

ideology_update_on_yearly_pulse_country = {
	events = {
		ztr_economic_update.25
		ztr_economic_update.26
		ztr_economic_update.27
	}
}

decolonization_on_yearly_pulse_country = {
	random_events = {
 		10 = ztr_decolonization.1 # Decolonization
		1 = ztr_decolonization.2 # Decolonization Tunisia
		1 = ztr_decolonization.3 # Decolonization Algeria
		1 = ztr_decolonization.4 # Decolonization Morocco
		1 = ztr_decolonization.5 # Decolonization Libya
		1 = ztr_decolonization.6 # Decolonization Egypt
		1 = ztr_decolonization.7 # Decolonization Sudan
		1 = ztr_decolonization.8 # Decolonization Arabia
		1 = ztr_decolonization.9 # Decolonization Oman
		1 = ztr_decolonization.10 # Decolonization Yemen
		1 = ztr_decolonization.11 # Decolonization Trucial States
		1 = ztr_decolonization.12 # Decolonization Persia
		1 = ztr_decolonization.13 # Decolonization Burma
		1 = ztr_decolonization.14 # Decolonization Siam
		1 = ztr_decolonization.15 # Decolonization Laos
		1 = ztr_decolonization.16 # Decolonization Cambodia
		1 = ztr_decolonization.17 # Decolonization Vietnam
		1 = ztr_decolonization.18 # Decolonization India
		1 = ztr_decolonization.19 # Decolonization Korea
		1 = ztr_decolonization.20 # Decolonization Japan
		1 = ztr_decolonization.21 # Decolonization China
		1 = ztr_decolonization.22 # Decolonization Afghanistan
		1 = ztr_decolonization.23 # Decolonization Malaysia
		1 = ztr_decolonization.24 # Decolonization Nepal
		1 = ztr_decolonization.25 # Decolonization Bhutan
		1 = ztr_decolonization.26 # Decolonization Tibet
		1 = ztr_decolonization.27 # Decolonization New Zealand
		1 = ztr_decolonization.28 # Decolonization Iraq
		1 = ztr_decolonization.29 # Decolonization Syria
		1 = ztr_decolonization.30 # Decolonization Lebanon
		1 = ztr_decolonization.31 # Decolonization Jordan
		1 = ztr_decolonization.32 # Decolonization Palestine
		1 = ztr_decolonization.33 # Decolonization Kurds
		1 = ztr_decolonization.34 # Decolonization Kenya
		1 = ztr_decolonization.35 # Decolonization Namibia
		1 = ztr_decolonization.36 # Decolonization Somalia
		1 = ztr_decolonization.37 # Decolonization Eritrea
		1 = ztr_decolonization.38 # Decolonization Chad
		1 = ztr_decolonization.39 # Decolonization Niger
		1 = ztr_decolonization.40 # Decolonization Mauritania
		1 = ztr_decolonization.41 # Decolonization Senegal
		1 = ztr_decolonization.42 # Decolonization Guinea
		1 = ztr_decolonization.43 # Decolonization Ivory Coast
		1 = ztr_decolonization.44 # Decolonization Ghana
		1 = ztr_decolonization.45 # Decolonization Togo
		1 = ztr_decolonization.46 # Decolonization Benin
		1 = ztr_decolonization.47 # Decolonization Burkina Faso
		1 = ztr_decolonization.48 # Decolonization Nigeria
		1 = ztr_decolonization.49 # Decolonization Cameroon
		1 = ztr_decolonization.50 # Decolonization Central African Republic
		1 = ztr_decolonization.51 # Decolonization Gabon
		1 = ztr_decolonization.52 # Decolonization Congo-Brazz
		1 = ztr_decolonization.53 # Decolonization Congo-Kinshasa
		1 = ztr_decolonization.54 # Decolonization Uganda
		1 = ztr_decolonization.55 # Decolonization Rwanda
		1 = ztr_decolonization.56 # Decolonization Tanzania
		1 = ztr_decolonization.57 # Decolonization Angola
		1 = ztr_decolonization.58 # Decolonization Zambia
		1 = ztr_decolonization.59 # Decolonization Mozambique
		1 = ztr_decolonization.60 # Decolonization Malawi
		1 = ztr_decolonization.61 # Decolonization Eswatini
		1 = ztr_decolonization.62 # Decolonization Lesotho
		1 = ztr_decolonization.63 # Decolonization Mali
		1 = ztr_decolonization.64 # Decolonization Botswana
		1 = ztr_decolonization.65 # Decolonization Zimbabwe
		1 = ztr_decolonization.66 # Decolonization Madagascar
		1 = ztr_decolonization.67 # Decolonization Etiopia
 	}
}

decolonization_age_on_yearly_pulse_country = {
	events = {
		ztr_decolonization_age.1
		ztr_decolonization_age.2
	}
}

irish_independence_on_yearly_pulse_country = {
	events = {
		irish_independence.6 # Good Friday Agreement
	}
}

usa_economy_update_on_yearly_pulse_country = {
	events = {
		usa_economy.1 # USA Gilded Age
	}
}

japan_economy_update_on_yearly_pulse_country = {
	events = {
		japan_economy.1 # Japan Meiji Modernization
	}
}

brazil_pop_update_on_yearly_pulse_country = {
	events = {
		brazil_pop.1 # Brazil End of Slavery pop
		brazil_pop.2 # Brazil during Slavery pop
	}
}

colony_pop_update_on_yearly_pulse_country = {
	events = {
		colony_pop.1 # Colony pop growth
	}
}

france_pop_update_on_yearly_pulse_country = {
	events = {
		france_pop.1 # France pop growth problem
	}
}

germany_pop_update_on_yearly_pulse_country = {
	events = {
		germany_pop.1 # Germany pop growth bonus
	}
}

super_germany_on_yearly_pulse_country = {
	events = {
		ztr_super_germany.1
	}
}

superpower_on_yearly_pulse_country = {
	events = {
		ztr_superpower.1 #Give superpower status
		ztr_superpower.2 #Remove superpower status if lost ranking
	}
}

flavor_middle_east_on_yearly_pulse_country = {
	events = {
		ztr_middle_east.1 # Egypt Sinai-Suez Question
		ztr_middle_east.3 # The idea of Israel
		ztr_middle_east.6 # Birth of Zionism in our country, after Israel creation, we will have a mass migration of Jewish from our country
	}
}

#############################

on_monthly_pulse_country = {
	on_actions = {
		un_intervention_on_monthly_pulse_country
		yeet_pops_on_monthly_pulse_country
	}
}

un_intervention_on_monthly_pulse_country = {
	random_events = {
		chance_of_no_event = 50
 		50 = ztr_un_event.3
 	}
}

# Thanks to Glompspark and Caracus for the on_action lag fix

yeet_pops_on_monthly_pulse_country = {
	events = {
		yeet_pops.1
		yeet_pops.2
	}
}

###################################

on_acquired_technology = {
	on_actions = {
		on_acquired_technology_deposits
	}
}

on_acquired_technology_deposits = {
	effect = {
		# Bauxite Deposits addition
		if = {
			limit = {
				NOT = { has_global_variable = ztr_bauxite_added_var }
				has_technology_researched = bauxite_processing
			}
			trigger_event = ztr_economic_update.20
		}
		# Advanced Ores Deposits addition
		if = {
			limit = {
				NOT = { has_global_variable = ztr_advancedores_added_var }
				has_technology_researched = quartz_glass
			}
			trigger_event = ztr_economic_update.21
		}
		# Uranium Deposits addition
		if = {
			limit = {
				NOT = { has_global_variable = ztr_uranium_added_var }
				has_technology_researched = verrier_modern_physics_tech
			}
			trigger_event = ztr_economic_update.22
		}
		# Gas Deposits addition
		if = {
			limit = {
				NOT = { has_global_variable = ztr_gas_added_var }
				has_technology_researched = natural_gas_extraction
			}
			trigger_event = ztr_economic_update.23
		}
		# Rare Earths Deposits addition
		if = {
			limit = {
				NOT = { has_global_variable = ztr_rare_earths_added_var }
				has_technology_researched = rare_earths
			}
			trigger_event = ztr_economic_update.24
		}
	}
}