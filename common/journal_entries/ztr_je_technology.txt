je_research_center_site = {
	icon = "gfx/interface/icons/event_icons/innovation.dds"

	group = je_group_technology

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = research_center_var
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		# There should be a state like that, despite research center will always be built in capital
		any_scope_state = {
			is_incorporated = yes
			is_split_state = no
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 50
			}
			any_scope_building = {
				is_building_type = building_university
				level >= 5
			}
		}
	}

	on_complete = {
		#remove_modifier = research_center_survey
		trigger_event = { id = ztr_technology.1 } # site found
	}

	invalid = {
		NOT = {
			any_scope_state = {
				is_incorporated = yes
				is_split_state = no
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 50
				}
				any_scope_building = {
					is_building_type = building_university
					level >= 5
				}
			}
		}
	}

	on_invalid = {
		remove_modifier = research_center_survey
		remove_variable = research_center_var
	}

	current_value = {
		value = root.var:research_center_var
	}

	goal_add_value = {
		value = 24
	}

	progressbar = yes

	weight = 10

	should_be_pinned_by_default = yes
}

je_research_center_construction = {
	icon = "gfx/interface/icons/event_icons/academia.dds"

	group = je_group_technology

	complete = {
		scope:target = { has_research_center_target = yes }
	}

	on_yearly_pulse = {
		effect = {
			if = {
				limit = {
					# This will be removed when dev will resolve AI not building great buildings while being in deficit
					capital = {
						NOR = {
							any_scope_building = {
								is_building_type = building_research_center
								is_under_construction = no
							}
							any_scope_building = {
								is_building_type = building_research_center
								is_under_construction = yes
							}
						}
					}
					is_ai = yes
				}
				capital = {
					create_building = {
						building = building_research_center
						level = 1
					}
				}
				# random_scope_state = {
				# 	limit = {
				# 		is_capital = yes
				# 	}
				# 	create_building = {
				# 		building = building_research_center
				# 		level = 1
				# 	}
				# }
			}
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				has_modifier = research_center_site
			}
		}
	}

	on_fail = {
		remove_variable = research_center_var
	}

	on_complete = {
		trigger_event = { id = ztr_technology.2 }
		remove_variable = research_center_var
		scope:target = {
			remove_modifier = research_center_site
		}
	}

	should_be_pinned_by_default = yes
}